<html>
<head>
    {% load static %}
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="{% static "mystyle2.css" %}">
</head>
<body>
<h1>{{ question.question_text }}</h1>
<script>
    document.write(5 + 6);
</script>
<ul>
{% for choice in question.choice_set.all %}
    <li>{{ choice.choice_text }} -- {{ choice.votes }} vote{{ choice.votes|pluralize }}</li>
{% endfor %}
</ul>
{% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}
{% for name in names %}
    <h1>{{ name }}</h1>
{% endfor %}

<h1>Hi world</h1>
<a href="{% url 'polls:detail' question.id %}">Vote again?</a>
<div id="map" class="center" style="width:400px;height:400px;background:yellow"></div>

<script>


var directionDisplay;
var directionsService;
var map;
function myMap() {
	var mapOptions = {
    center: "12A Greenridge Ct, Auckland",
    zoom: 20,
    mapTypeId: google.maps.MapTypeId.ROADMAP
}

	map = new google.maps.Map(document.getElementById("map"), mapOptions);

	var myNames = [];
    {% for name in names %}
        window.alert('{{ name }}')
        myNames.push('{{ name }}')
    {% endfor %}
    var directionsService = new google.maps.DirectionsService();
	calculateAndDisplayRoute(directionsService, "12A Greenridge Ct, Auckland", "44 Arrenway Drive, Auckland")
	calculateAndDisplayRoute(directionsService, "12A Greenridge Ct, Auckland", "19 Cheval Drive, Auckland")



}

var i = 1;
function renderDirections(response, start, end) {

    var directionsRenderer = new google.maps.DirectionsRenderer({suppressMarkers: true});
    directionsRenderer.setMap(map);
    directionsRenderer.setDirections(response);
     // add start and end markers
    var my_route = response.routes[0];
    window.alert('leg length is ' + my_route.legs.length)
    var marker = new google.maps.Marker({
        position: my_route.legs[0].start_location,
        label: "home",
        map: map
    });
    var marker = new google.maps.Marker({
    position: my_route.legs[0].end_location,
    label: "" + i,
    map: map
    })
    i++;

}
function calculateAndDisplayRoute(directionsService, start, end) {

        directionsService.route({
          origin: start,
          destination: end,
          travelMode: 'DRIVING',
        }, function(response, status) {
          if (status === 'OK') {
            renderDirections(response, start, end)
          } else {
            window.alert('Directions request failed due to ' + status);
          }
        });
      }

</script>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDQXG5qgd9OTre3GsTmbh4QR0nLmuo4B2k&callback=myMap"></script>

</body>
</html>